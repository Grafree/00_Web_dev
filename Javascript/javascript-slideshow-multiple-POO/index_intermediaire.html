<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" >
	<head>
    	<title>Galerie</title>
    	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<link href="style.css" rel="stylesheet" type="text/css" />
		<script language="javascript">

	window.onload = function(){
		// Ajouter pour chaque ligne de vignette. Correspond au <input type="hidden" />
		//document.getElementById(id+'prog').value = 0;
		
		// Explications --> http://javascript.developpez.com/faq/?page=syntaxe#pseudoUrl
		document.getElementById('vi_5_right').onmouseover = function(){ mouseRightGo(); return false; };
		document.getElementById('vi_5_right').onmouseout = function(){ mouseRightStop(); return false; };
		
		document.getElementById('vi_5_left').onmouseover = function(){ mouseLeftGo(); return false; };
		document.getElementById('vi_5_left').onmouseout = function(){ mouseLeftStop(); return false; };
	}


var objslide = {

		distance : parseInt( 5 ),
		speed : 25,		
		id : 'vi_5',
		
		progress : 0,	


		moveback : function(){
			var espaceVignette = document.getElementById(this.id);
			var support = document.getElementById(this.id).getElementsByTagName( 'div' )[0];
			
			//var progress = document.getElementById(this.id + 'prog').value;

			var distanceNeg = 0 - this.distance;
			var progressDiff = this.progress - distanceNeg;
			
			if( progressDiff < 0 ){
				var progressInt = parseInt( this.progress );

				var valeur = progressInt + this.distance;
				var getvaleur = parseInt( valeur );
				support.style.left = getvaleur + 'px';	
				this.progress = getvaleur; 
				//document.getElementById(this.id + 'prog').value = getvaleur;
			}else{
				support.style.left = '0px';		
				//document.getElementById(id + 'prog').value = 0;	
				this.progress = 0; 
			}
		},

		move : function(){
			var dist = 0 - this.distance; // Correspond à la distance négative parcouru en pixel lors de chaque clic de déplacement
			
			var espaceVignette = document.getElementById(this.id);
			var support = document.getElementById(this.id).getElementsByTagName( 'div' )[0];
			var nbli = support.getElementsByTagName( 'li' ).length; // Indique le nombre d'images dans le diaporama
						
			var espaceVignetteWidth = document.getElementById(this.id).offsetWidth; // Largeur de la partie visible
			
			var totalEspacevignette = 0;

			for ( i = 0; i < nbli; i++ ){
				
				totalEspacevignette += support.getElementsByTagName( 'img' )[i].offsetWidth; // Indique la largeur de chaque image

			}
			
			support.style.width = totalEspacevignette + 'px'; // Redéfini la largeur du diaporama en fonction de la largeur de toutes les images

			//var progress = document.getElementById(this.id + 'prog').value;   
			var progressInt = parseInt( this.progress );
			
			// Calcul la distance maximum de la totalité des vignettes assemblées.
			var espaceWidthDiff = 0 - ( totalEspacevignette - espaceVignetteWidth );
						
			if( progressInt > espaceWidthDiff ){
				
				var reste = espaceWidthDiff - progressInt;
				var doubleDist = parseInt( dist ) * 2 ;

				if ( reste > doubleDist) {
					var getvaleur = espaceWidthDiff; // Permet de vérifier s'il y a une distance suffisante pour encore un clic
					support.style.left = getvaleur + 'px';		
					this.progress = getvaleur;
					//document.getElementById(id + 'prog').value = getvaleur;
				}else{
					var valeur = progressInt + dist;
					var getvaleur = parseInt( valeur );
					support.style.left = getvaleur + 'px';		
					this.progress = getvaleur;
					//document.getElementById(id + 'prog').value = getvaleur;
				}
				
			}else{
				support.style.left = espaceWidthDiff + 'px';		
				this.progress = espaceWidthDiff;
				//document.getElementById(id + 'prog').value = espaceWidthDiff;
			}
			
		},
		/*
		mouseRightGo : function(){
			moveIntervalId = setInterval( "move()", this.speed ); // REMARQUE : Il est nécessaire de la fonction appelée soit entre parenthèse
		},
		mouseRightStop : function(){
			clearInterval( moveIntervalId );
		},
		
		mouseLeftGo : function(){
			moveIntervalId = setInterval( "moveback()", this.speed ); // REMARQUE : Il est nécessaire de la fonction appelée soit entre parenthèse
		},
		mouseLeftStop : function(){
			clearInterval( moveIntervalId );
		}
		*/
}	

	function moveDo(){ objslide.move(); }
	function movebackDo(){ objslide.moveback(); }

		
	function mouseRightGo(){
		moveIntervalId = setInterval( "moveDo()", objslide.speed ); // REMARQUE : Il est nécessaire de la fonction appelée soit entre parenthèse
	}
	function mouseRightStop(){
		clearInterval( moveIntervalId );
	}
	
	function mouseLeftGo(){
		moveIntervalId = setInterval( "movebackDo()", objslide.speed ); // REMARQUE : Il est nécessaire de la fonction appelée soit entre parenthèse
	}
	function mouseLeftStop(){
		clearInterval( moveIntervalId );
	}			
		
</script>
                            
</head>
 
 
<body>
<div class="vignette_show">
	<div class="espace_vignette" id="vi_5">
		<div class="support">						
			<ul id="slideshow">
	        
				<li><img src="1-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="3-vignette.gif" /></li>
				<li><img src="4-vignette.gif" /></li>
				<li><img src="1-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="3-vignette.gif" /></li>
				<li><img src="4-vignette.gif" /></li>
				<li><img src="1-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="3-vignette.gif" /></li>
				<li><img src="4-vignette.gif" /></li>
				<li><img src="1-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
				<li><img src="2-vignette.gif" /></li>
	                    
			</ul>
		</div>
		</div>
	<input type="hidden" id="vi_5prog" value="0" /> 
	<div id="vi_5_left" class="arrow">
	    &lt;&lt;
	</div>
	<div id="vi_5_right" class="arrow">
		&gt;&gt;
	</div>
</div>

                
	</body>
</html>